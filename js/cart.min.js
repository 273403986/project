require.config({paths:{jquery:"jquery-1.11.3",cookie:"jquery.cookie",sport:"sport",public1:"public"}}),require(["jquery","cookie","sport","public1"],function(e,i,t,n){e(function(){function i(){var e=document.getElementById("service").getElementsByTagName("div")[0],i=document.documentElement.scrollTop+200;t.sport(e,{top:i});var n=document.getElementById("service").getElementsByTagName("div")[1],a=n.getElementsByTagName("img")[0];e.onmouseover=function(){e.getElementsByTagName("img")[0].src="../images/panel_open2.png"},e.onmouseout=function(){e.getElementsByTagName("img")[0].src="../images/panel_open.png"},e.onclick=function(){n.style.display="block",n.style.top=e.offsetTop+"px",e.style.display="none"},t.sport(n,{top:i}),a.onmouseover=function(){a.src="../images/panel_close2.png"},a.onmouseout=function(){a.src="../images/panel_close.png"},a.onclick=function(){n.style.display="none",e.style.display="block"}}n.over("top","div2","../"),n.fixS("../"),n.lg(),n.lg2(),new i,n.fix(),new function(){var i=e.cookie("cart")?e.cookie("cart"):"",t=0,n=0,a=e("#purchase .div2 p span").eq(1);if(i){var r=o(i);for(var c in r){var s=r[c],p='<li data-good-id="'+c+'"><p><input class="check" type="checkbox" checked="checked"/><img src="'+s.src+'" alt="" /><a href="javascript:;">'+s.name+'</a><span>默认</span><span>默认</span></p><p><input type="button" class="sb" value="-"/><input class="txt" type="text" value="'+s.num+'"/><input   type="button" class="ad" value="+"/></p><p class="p3"><i>单价：</i><span>'+s.price+'</span><a href="javascript:;">删除</a><span>小计：</span><span>'+s.num*s.price+"</span></p></li>";e(p).appendTo("#purchase .div1 ul"),n+=s.num*s.price}e("#purchase .div1 ul li .check"),e("#purchase .div1 ul li a").click(function(){if(e(this).index()%2==0){var i=e(this).parents("li").remove().attr("data-good-id"),t=o(e.cookie("cart")?e.cookie("cart"):"");n-=Number(t[i].num*t[i].price+""),delete t[i],e.cookie("cart",JSON.stringify(function(e){for(var i in e)e[i]={name:e[i].name,price:e[i].price,num:e[i].num,src:e[i].src};return e}(t)),{expires:7,path:"/"}),u()}}),e("#purchase .div1 ul li p .ad").click(function(){var i=e(this).parents("li").attr("data-good-id"),a=o(e.cookie("cart")?e.cookie("cart"):"");n+=Number(1*a[i].price),a[i].num=Number(a[i].num)+1,e(this).parent().children("input").eq(1).val(a[i].num),t=Number(a[i].num*a[i].price),e(this).parent().siblings(".p3").children("span").eq(2).text(t),e("#fix .div2 span").text(Number(a[i].num)),e.cookie("cart",JSON.stringify(a),{expires:7,path:"/"}),u()}),e("#purchase .div1 ul li p .sb").click(function(){var i=e(this).parents("li").attr("data-good-id"),a=o(e.cookie("cart")?e.cookie("cart"):"");a[i].num>1?(n-=Number(1*a[i].price+""),a[i].num=Number(a[i].num)-1,e(this).parent().children("input").eq(1).val(a[i].num),t=Number(a[i].num*a[i].price+""),e(this).parent().siblings(".p3").children("span").eq(2).text(t),e("#fix .div2 span").text(Number(a[i].num)),e.cookie("cart",JSON.stringify(a),{expires:7,path:"/"}),u()):alert("数量不能小于1")}),e("#purchase .div1 ul li .txt").blur(function(){var i=e(this).parents("li").attr("data-good-id"),a=o(e.cookie("cart")?e.cookie("cart"):"");/^\d+$/.test(e(this).val())?(parseInt(e(this).val()>a[i].num)?n+=Number((e(this).val()-a[i].num)*a[i].price):parseInt(e(this).val()==a[i].num)||(n-=Number((a[i].num-e(this).val())*a[i].price+"")),a[i].num=parseInt(e(this).val()),t=Number(a[i].num*a[i].price+""),e(this).parent().siblings(".p3").children("span").eq(2).text(t),e("#fix .div2 span").text(Number(a[i].num)),e.cookie("cart",JSON.stringify(a),{expires:7,path:"/"}),u()):(n-=Number((a[i].num-1)*a[i].price+""),a[i].num=1,e(this).val("1"),t=Number(a[i].num*a[i].price+""),e(this).parent().siblings(".p3").children("span").eq(2).text(t),e("#fix .div2 span").text(Number(a[i].num)),e.cookie("cart",JSON.stringify(a),{expires:7,path:"/"}),u())})}else alert("你的购物车为空");function o(e){return e?e?JSON.parse(e):void 0:{}}function u(){var i=o(e.cookie("cart")?e.cookie("cart"):""),t=0;for(var r in i)t+=Number(i[r].num);e("#fix .div2 span").text(t),a.text(n)}new u},window.onscroll=function(){new i}})});